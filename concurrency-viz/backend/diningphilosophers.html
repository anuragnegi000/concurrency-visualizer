<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dining Philosophers Visualization</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/stylesdining.css">
  <script src="./js/scriptdining.js"></script>
</head>
<body class="bg-light">

<div class="container text-center mt-4">
  <h1 class="text-primary">Dining Philosophers Visualization</h1>

  <div class="form-inline mb-3">
  <label for="philosopherCount" class="form-label fw-bold">Number of Philosophers (1-5):</label>
  <input type="number" id="philosopherCount" class="form-control w-auto d-inline-block modern-input" min="1" max="5" value="5">
  <button onclick="startSimulation()" class="btn modern-btn btn-create">Create Table</button>
  <button onclick="startAutomation()" class="btn modern-btn btn-automate ms-2">Automate</button>
  <button onclick="resetSimulation()" class="btn modern-btn btn-reset ms-2">Reset</button>
</div>

  <div class="main-container">
    <div class="left-panel">
      <div class="info-box" id="infoBox">Click on a philosopher to make them eat or press Automate</div>
      <div class="error" id="errorBox"></div>
      <div id="circle" class="shadow mt-4"></div>
      <div id="logBox" class="rounded"></div>
    </div>
    <div class="right-panel">
  <div class="spacer"></div>
  <table id="statusTable" class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Philosopher</th>
        <th>Status</th>
        <th>Left Chopstick</th>
        <th>Right Chopstick</th>
        <th>Wait Count</th>
      </tr>
    </thead>
    <tbody id="statusTableBody"></tbody>
  </table>
</div>
  </div>
</div>




<div class="container mt-4">
  <div class="card modern-card border-0 shadow">
    <div class="card-header modern-card-header text-white fw-bold">
      üß† Dining Philosophers Explanation
    </div>
    <div class="card-body text-start">
      <p>
        The <strong>Dining Philosophers Problem</strong> was introduced by <em>E. W. Dijkstra</em>. It illustrates the
        challenges of <strong>concurrent programming</strong> with shared resources.
      </p>

      <h5>üçù The Setup</h5>
      <ul>
        <li>Five philosophers sit around a circular table.</li>
        <li>Each philosopher alternates between <strong>thinking</strong> and <strong>eating</strong>.</li>
        <li>There are only <strong>five chopsticks</strong> (shared between adjacent philosophers).</li>
        <li>A philosopher needs <strong>two chopsticks</strong> (left and right) to eat.</li>
      </ul>

      <h5>üîí How It Works in This Simulation</h5>
      <ul>
        <li>Each philosopher is represented by a <strong>thread</strong>.</li>
        <li>Each chopstick is protected by a <strong>mutex lock</strong>.</li>
        <li>To eat, a philosopher locks their <strong>left</strong> and <strong>right</strong> chopsticks.</li>
        <li>After eating, they <strong>unlock</strong> both chopsticks and return to thinking.</li>
      </ul>

      <h5 class="text-danger">‚ö†Ô∏è Deadlock</h5>
      <p>
        A <strong>deadlock</strong> can happen when:
        <ul>
          <li>All philosophers pick up their <strong>left chopstick</strong> at the same time.</li>
          <li>Each waits for the right chopstick, which is already held by their neighbor.</li>
          <li>This forms a <strong>circular wait</strong> ‚Äî no one can proceed.</li>
        </ul>
        <strong>Result:</strong> All philosophers are stuck. No one eats.
      </p>

      <h5 class="text-warning">‚ö†Ô∏è Starvation</h5>
      <p>
        <strong>Starvation</strong> occurs when:
        <ul>
          <li>Some philosophers are <em>faster</em> (think/eat quickly).</li>
          <li>They keep acquiring chopsticks before others get a chance.</li>
          <li>Slower philosophers <strong>wait indefinitely</strong> despite the system not being deadlocked.</li>
        </ul>
        <strong>Result:</strong> Some philosophers never get to eat ‚Äî even though chopsticks are occasionally free.
      </p>

      <h5>üìò Simulation Goals</h5>
      <ul>
        <li>Visualize thread-based concurrency and resource sharing.</li>
        <li>Observe real-time deadlock and starvation issues.</li>
        <li>Experiment with custom rules to prevent these problems.</li>
      </ul>

      <p class="mt-3">
        üëâ Try to <strong>click the philosophers</strong> and watch how chopsticks are picked up and released.
        Can you trigger a deadlock or see starvation happening?
      </p>
    </div>
  </div>
</div>

</body>
</html>
